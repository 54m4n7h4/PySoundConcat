<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Tutorial &mdash; Concatenator 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.3.4/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.3.4/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="Concatenator 1.0 documentation" href="index.html" />
    <link rel="next" title="API" href="api.html" />
    <link rel="prev" title="Installation" href="installation.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          Concatenator</a>
        <span class="navbar-text navbar-version pull-left"><b>1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="descriptor_defs.html">Audio Descriptor Definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">API Usage Examples</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Tutorial</a><ul>
<li><a class="reference internal" href="#getting-started">Getting Started</a></li>
<li><a class="reference internal" href="#config-py">config.py</a></li>
<li><a class="reference internal" href="#configuration-flags">Configuration Flags</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="installation.html" title="Previous Chapter: Installation"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Installation</span>
    </a>
  </li>
  <li>
    <a href="api.html" title="Next Chapter: API"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">API &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/tutorial.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput > div,
div.nbinput div[class^=highlight],
div.nbinput div[class^=highlight] pre,
div.nboutput,
div.nboutput > div,
div.nboutput div[class^=highlight],
div.nboutput div[class^=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput > :first-child pre {
    color: navy;
}

/* output prompt */
div.nboutput > :first-child pre {
    color: darkred;
}

/* all prompts */
div.nbinput > :first-child[class^=highlight],
div.nboutput > :first-child[class^=highlight],
div.nboutput > :first-child {
    min-width: 11ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}

/* input/output area */
div.nbinput > :nth-child(2)[class^=highlight],
div.nboutput > :nth-child(2),
div.nboutput > :nth-child(2)[class^=highlight] {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
}

/* input area */
div.nbinput > :nth-child(2)[class^=highlight] {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput  > :nth-child(2).stderr {
    background: #fdd;
}

/* ANSI colors */
.ansiblack { color: black; }
.ansired { color: darkred; }
.ansigreen { color: darkgreen; }
.ansiyellow { color: #c4a000; }
.ansiblue { color: darkblue; }
.ansipurple { color: darkviolet; }
.ansicyan { color: steelblue; }
/* See https://github.com/jupyter/nbconvert/issues/174 */
.ansigray { color: gray; }  /* nbconvert CSS */
.ansigrey { color: gray; }  /* nbconvert HTML output */

.ansibgblack { background-color: black; }
.ansibgred { background-color: red; }
.ansibggreen { background-color: green; }
.ansibgyellow { background-color: yellow; }
.ansibgblue { background-color: blue; }
.ansibgpurple { background-color: magenta; }
.ansibgcyan { background-color: cyan; }
.ansibggray { background-color: gray; }

.ansibold { font-weight: bold; }
</style>
<div class="section" id="tutorial">
<h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h1>
<p>This section gives a brief introduction to using the &#8216;concatenator.py&#8217; script. The
script can be found in the src/sppysound directory of the project folder, or
can be accessed by running the &#8216;concatenator&#8217; symbolic link from the project
folder root.</p>
<div class="section" id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>To view all available options simply run:</p>
<div class="highlight-bash"><div class="highlight"><pre>./concatenator -h
</pre></div>
</div>
<p>A list of all commands available is then presented:</p>
<div class="highlight-bash"><div class="highlight"><pre>usage: concatenator <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>--src-db<span class="o">]</span> <span class="o">[</span>--tar_db<span class="o">]</span>
                <span class="o">[</span>--analyse <span class="o">[</span>ANALYSE <span class="o">[</span>ANALYSE ...<span class="o">]]]</span> <span class="o">[</span>--analysis_dict<span class="o">]</span>
                <span class="o">[</span>--fft<span class="o">]</span> <span class="o">[</span>--kurtosis<span class="o">]</span> <span class="o">[</span>--matcher<span class="o">]</span> <span class="o">[</span>--matcher_weightings<span class="o">]</span>
                <span class="o">[</span>--rms<span class="o">]</span> <span class="o">[</span>--skewness<span class="o">]</span> <span class="o">[</span>--synthesizer<span class="o">]</span> <span class="o">[</span>--variance<span class="o">]</span>
                <span class="o">[</span>--reanalyse<span class="o">]</span> <span class="o">[</span>--rematch<span class="o">]</span> <span class="o">[</span>--enforcef0<span class="o">]</span> <span class="o">[</span>--enforcerms<span class="o">]</span>
                <span class="o">[</span>--copy<span class="o">]</span> <span class="o">[</span>--match_method<span class="o">]</span> <span class="o">[</span>--verbose<span class="o">]</span>
                <span class="nb">source </span>target output

Concatenator is a tool <span class="k">for</span> synthesizing interpretations of a sound, through
the analysis and synthesis of audio grains from a corpus database. The program
works by analysing overlapping segments of audio <span class="o">(</span>known as grains<span class="o">)</span> from both
the target sound and the <span class="nb">source </span>database, <span class="k">then</span> searching <span class="k">for</span> the closest
matching grain in the <span class="nb">source </span>database to the target sound. Finally, the output
is generated by overlap-adding the best matches.

positional arguments:
  <span class="nb">source                </span>Directory of <span class="nb">source </span>files/database to take grains from
                        when synthesizing output
  target                Directory of target files/database to match <span class="nb">source</span>
<span class="nb">                        </span>grains to.
  output                Directory to use as database <span class="k">for</span> outputing results and
                        match information. Output audio will be stored in the
                        /audio sub-directory and match data will be stored in
                        the /data directory.

optional arguments:
  -h, --help            show this <span class="nb">help </span>message and <span class="nb">exit</span>
  --src-db              Specifies the directory to create the <span class="nb">source </span>database
                        and store analyses in. If not specified <span class="k">then</span> the

...
</pre></div>
</div>
<p>For this demonstration, the following file structure will be used:</p>
<div class="highlight-bash"><div class="highlight"><pre>/Users/samuelperry/concatenator_test/
<span class="p">|</span>-- source_db
<span class="p">|</span>   <span class="p">|</span>-- Trumpet.novib.ff.A3.stereo.aif
<span class="p">|</span>   <span class="p">|</span>-- Trumpet.novib.ff.A4.stereo.aif
<span class="p">|</span>   <span class="p">|</span>-- Trumpet.novib.ff.A5.stereo.aif

...

<span class="p">|</span>   <span class="p">|</span>-- Trumpet.novib.ff.F5.stereo.aif
<span class="p">|</span>   <span class="p">|</span>-- Trumpet.novib.ff.G3.stereo.aif
<span class="p">|</span>   <span class="sb">`</span>-- Trumpet.novib.ff.G4.stereo.aif
<span class="sb">`</span>-- target_db
    <span class="p">|</span>-- target.01.wav
    <span class="p">|</span>-- target.02.wav
    <span class="p">|</span>-- target.03.wav
    <span class="sb">`</span>-- target.04.wav
</pre></div>
</div>
<p>A source database containing a small selection of trumpet samples (aquired from</p>
<p><a class="reference external" href="http://theremin.music.uiowa.edu/MIS.html">http://theremin.music.uiowa.edu/MIS.html</a>) will be used to match grains with 4
target sounds. This will produce 4 output files, one for each target sound.</p>
<p>The following command is used to to generate the output:</p>
<div class="highlight-bash"><div class="highlight"><pre>concatenator ./source_db ./target_db ./output_db --src_db <span class="se">\</span>
./analysed_source_db --tar_db ./analysed_tar_db
</pre></div>
</div>
<p>The specified directories are searched recursively for audio files that are
used as items in the database. These item are then matched and synthesized as
explained in the <a class="reference internal" href="overview.html#overview"><span>Overview</span></a> section. Output is stored in the audio
directory of the output database that has been created.
This produces this directory structure:</p>
<div class="highlight-bash"><div class="highlight"><pre>/Users/samuelperry/concatenator_test/
<span class="p">|</span>-- analysed_source_db
<span class="p">|</span>   <span class="p">|</span>-- audio
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>-- Trumpet.novib.ff.A3.stereo.aif -&gt; <span class="o">(</span>Symlink<span class="o">)</span>
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>-- Trumpet.novib.ff.A4.stereo.aif -&gt; <span class="o">(</span>Symlink<span class="o">)</span>
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>-- Trumpet.novib.ff.A5.stereo.aif -&gt; <span class="o">(</span>Symlink<span class="o">)</span>

...

<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>-- Trumpet.novib.ff.F5.stereo.aif -&gt; <span class="o">(</span>Symlink<span class="o">)</span>
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>-- Trumpet.novib.ff.G3.stereo.aif -&gt; <span class="o">(</span>Symlink<span class="o">)</span>
<span class="p">|</span>   <span class="p">|</span>   <span class="sb">`</span>-- Trumpet.novib.ff.G4.stereo.aif -&gt; <span class="o">(</span>Symlink<span class="o">)</span>
<span class="p">|</span>   <span class="sb">`</span>-- data
<span class="p">|</span>       <span class="sb">`</span>-- analysis_data.hdf5
<span class="p">|</span>-- analysed_tar_db
<span class="p">|</span>   <span class="p">|</span>-- audio
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>-- target.01.wav -&gt; <span class="o">(</span>Symlink<span class="o">)</span>
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>-- target.02.wav -&gt; <span class="o">(</span>Symlink<span class="o">)</span>
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>-- target.03.wav -&gt; <span class="o">(</span>Symlink<span class="o">)</span>
<span class="p">|</span>   <span class="p">|</span>   <span class="sb">`</span>-- target.04.wav -&gt; <span class="o">(</span>Symlink<span class="o">)</span>
<span class="p">|</span>   <span class="sb">`</span>-- data
<span class="p">|</span>       <span class="sb">`</span>-- analysis_data.hdf5
<span class="p">|</span>-- output_db
<span class="p">|</span>   <span class="p">|</span>-- audio
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>-- target.01_output.wav
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>-- target.02_output.wav
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>-- target.03_output.wav
<span class="p">|</span>   <span class="p">|</span>   <span class="sb">`</span>-- target.04_output.wav
<span class="p">|</span>   <span class="sb">`</span>-- data
<span class="p">|</span>       <span class="sb">`</span>-- analysis_data.hdf5
<span class="p">|</span>-- source_db
<span class="p">|</span>   <span class="p">|</span>-- Trumpet.novib.ff.A3.stereo.aif
<span class="p">|</span>   <span class="p">|</span>-- Trumpet.novib.ff.A4.stereo.aif
<span class="p">|</span>   <span class="p">|</span>-- Trumpet.novib.ff.A5.stereo.aif
<span class="p">|</span>   <span class="p">|</span>-- Trumpet.novib.ff.F5.stereo.aif

...

<span class="p">|</span>   <span class="p">|</span>-- Trumpet.novib.ff.G3.stereo.aif
<span class="p">|</span>   <span class="sb">`</span>-- Trumpet.novib.ff.G4.stereo.aif
<span class="sb">`</span>-- target_db
    <span class="p">|</span>-- target.01.wav
    <span class="p">|</span>-- target.02.wav
    <span class="p">|</span>-- target.03.wav
    <span class="sb">`</span>-- target.04.wav
</pre></div>
</div>
<p>By using the &#8211;src_db and &#8211;tar_db flags, alternative locations are specified
for generating the databases and storing analysis data. Symbolic links are
created, referencing the original audio files without moving them.  This allows
large databases to be used in place without copying or moving it&#8217;s content.</p>
<p>Alternatively, databases can be generated in place by ommiting the &#8211;src_db and
&#8211;tar_db flags. this will create the database directory structure directly in
the directories provided as source and target.</p>
<p>The &#8211;copy flag can be used in conjunction with these flags in order to create
actual copies of the audio files at the destinations. This allows for the
creation of partable databases that can moved to other machines without
breaking links to the original files. (Any pre-existing symbolic links will be
overwritten with hard copies when using this option.)</p>
</div>
<div class="section" id="config-py">
<h2>config.py<a class="headerlink" href="#config-py" title="Permalink to this headline">¶</a></h2>
<p>The config.py file is used for specifying all user defined options and can be
edited in the concatenator project directory. Comments explain the function of
each parameter. The default config.py file looks like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Specify analysis parameters for root mean square analysis.</span>
<span class="n">rms</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&quot;window_size&quot;</span><span class="p">:</span> <span class="mi">70</span><span class="p">,</span>
    <span class="s">&quot;overlap&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">}</span>

<span class="c"># Specify analysis parameters for variance analysis.</span>
<span class="n">variance</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&quot;window_size&quot;</span><span class="p">:</span> <span class="mi">70</span><span class="p">,</span>
    <span class="s">&quot;overlap&quot;</span><span class="p">:</span> <span class="mi">2</span>
<span class="p">}</span>

<span class="c"># Specify analysis parameters for temporal kurtosis analysis.</span>
<span class="n">kurtosis</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&quot;window_size&quot;</span><span class="p">:</span> <span class="mi">70</span><span class="p">,</span>
    <span class="s">&quot;overlap&quot;</span><span class="p">:</span> <span class="mi">2</span>
<span class="p">}</span>

<span class="c"># Specify analysis parameters for temporal skewness analysis.</span>
<span class="n">skewness</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&quot;window_size&quot;</span><span class="p">:</span> <span class="mi">70</span><span class="p">,</span>
    <span class="s">&quot;overlap&quot;</span><span class="p">:</span> <span class="mi">2</span>
<span class="p">}</span>

<span class="c"># Specify analysis parameters for FFT analysis.</span>
<span class="n">fft</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&quot;window_size&quot;</span><span class="p">:</span> <span class="mi">65536</span>
<span class="p">}</span>

<span class="n">database</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c"># Enables creation of symbolic links to files not in the database rather</span>
    <span class="c"># than making pysical copies.</span>
    <span class="s">&quot;symlink&quot;</span><span class="p">:</span> <span class="bp">True</span>
<span class="p">}</span>

<span class="c"># Sets the weighting for each analysis. a higher weighting gives an analysis</span>
<span class="c"># higher presendence when finding the best matches.</span>
<span class="n">matcher_weightings</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&quot;f0&quot;</span> <span class="p">:</span> <span class="mf">1.</span><span class="p">,</span>
    <span class="s">&quot;spccntr&quot;</span> <span class="p">:</span> <span class="mf">1.</span><span class="p">,</span>
    <span class="s">&quot;spcsprd&quot;</span> <span class="p">:</span> <span class="mf">1.</span><span class="p">,</span>
    <span class="s">&quot;spcflux&quot;</span> <span class="p">:</span> <span class="mf">1.</span><span class="p">,</span>
    <span class="s">&quot;spccf&quot;</span> <span class="p">:</span> <span class="mf">1.</span><span class="p">,</span>
    <span class="s">&quot;spcflatness&quot;</span><span class="p">:</span> <span class="mf">1.</span><span class="p">,</span>
    <span class="s">&quot;zerox&quot;</span> <span class="p">:</span> <span class="mf">1.</span><span class="p">,</span>
    <span class="s">&quot;rms&quot;</span> <span class="p">:</span> <span class="mf">1.</span><span class="p">,</span>
    <span class="s">&quot;peak&quot;</span><span class="p">:</span> <span class="mf">1.</span><span class="p">,</span>
    <span class="s">&quot;centroid&quot;</span><span class="p">:</span> <span class="mf">1.</span><span class="p">,</span>
    <span class="s">&quot;kurtosis&quot;</span><span class="p">:</span> <span class="mf">1.</span><span class="p">,</span>
    <span class="s">&quot;skewness&quot;</span><span class="p">:</span> <span class="mf">1.</span><span class="p">,</span>
    <span class="s">&quot;variance&quot;</span><span class="p">:</span> <span class="mf">3.</span><span class="p">,</span>
    <span class="s">&quot;harm_ratio&quot;</span><span class="p">:</span> <span class="mf">1.</span>
<span class="p">}</span>

<span class="c"># Specifies the method for averaging analysis frames to create a single value</span>
<span class="c"># for comparing to other grains. Possible formatters are: &#39;mean&#39;, &#39;median&#39;,</span>
<span class="c"># &#39;log2_mean&#39;, &#39;log2_median&#39;</span>
<span class="n">analysis_dict</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&quot;f0&quot;</span><span class="p">:</span> <span class="s">&quot;log2_median&quot;</span><span class="p">,</span>
    <span class="s">&quot;rms&quot;</span><span class="p">:</span> <span class="s">&quot;mean&quot;</span><span class="p">,</span>
    <span class="s">&quot;zerox&quot;</span><span class="p">:</span> <span class="s">&quot;mean&quot;</span><span class="p">,</span>
    <span class="s">&quot;spccntr&quot;</span><span class="p">:</span> <span class="s">&quot;mean&quot;</span><span class="p">,</span>
    <span class="s">&quot;spcsprd&quot;</span><span class="p">:</span> <span class="s">&quot;mean&quot;</span><span class="p">,</span>
    <span class="s">&quot;spcflux&quot;</span><span class="p">:</span> <span class="s">&quot;mean&quot;</span><span class="p">,</span>
    <span class="s">&quot;spccf&quot;</span><span class="p">:</span> <span class="s">&quot;mean&quot;</span><span class="p">,</span>
    <span class="s">&quot;spcflatness&quot;</span><span class="p">:</span> <span class="s">&quot;mean&quot;</span><span class="p">,</span>
    <span class="s">&quot;peak&quot;</span><span class="p">:</span> <span class="s">&quot;mean&quot;</span><span class="p">,</span>
    <span class="s">&quot;centroid&quot;</span><span class="p">:</span> <span class="s">&quot;mean&quot;</span><span class="p">,</span>
    <span class="s">&quot;kurtosis&quot;</span><span class="p">:</span> <span class="s">&quot;mean&quot;</span><span class="p">,</span>
    <span class="s">&quot;skewness&quot;</span><span class="p">:</span> <span class="s">&quot;mean&quot;</span><span class="p">,</span>
    <span class="s">&quot;variance&quot;</span><span class="p">:</span> <span class="s">&quot;mean&quot;</span><span class="p">,</span>
    <span class="s">&quot;harm_ratio&quot;</span><span class="p">:</span> <span class="s">&quot;mean&quot;</span>
<span class="p">}</span>

<span class="n">analysis</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c"># Force the deletion of any pre-existing analyses to create new ones. This</span>
    <span class="c"># is needed for overwriting old analyses generated with different</span>
    <span class="c"># parameters to the current ones.</span>
    <span class="s">&quot;reanalyse&quot;</span><span class="p">:</span> <span class="bp">False</span>
<span class="p">}</span>

<span class="n">matcher</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c"># Force the re-matching of analyses</span>
    <span class="s">&quot;rematch&quot;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="s">&quot;grain_size&quot;</span><span class="p">:</span> <span class="mi">70</span><span class="p">,</span>
    <span class="s">&quot;overlap&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="c"># Defines the number of matches to keep for synthesis. Note that this must</span>
    <span class="c"># also be specified in the synthesis config</span>
    <span class="s">&quot;match_quantity&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="c"># Choose the algorithm used to perform matching. kdtree is recommended for</span>
    <span class="c"># larger datasets.</span>
    <span class="s">&quot;method&quot;</span><span class="p">:</span> <span class="s">&#39;kdtree&#39;</span>
<span class="p">}</span>

<span class="n">synthesizer</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c"># Artificially scale the output grain by the difference in RMS values</span>
    <span class="c"># between source and target.</span>
    <span class="s">&quot;enforce_rms&quot;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="c"># Specify the ratio limit that is the grain can be scaled by.</span>
    <span class="s">&quot;enf_rms_ratio_limit&quot;</span><span class="p">:</span> <span class="mf">100.</span><span class="p">,</span>
    <span class="c"># Artificially modify the pitch by the difference in f0 values between</span>
    <span class="c"># source and target.</span>
    <span class="s">&quot;enforce_f0&quot;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="c"># Specify the ratio limit that is the grain can be modified by.</span>
    <span class="s">&quot;enf_f0_ratio_limit&quot;</span><span class="p">:</span> <span class="mf">10.</span><span class="p">,</span>
    <span class="s">&quot;grain_size&quot;</span><span class="p">:</span> <span class="mi">70</span><span class="p">,</span>
    <span class="s">&quot;overlap&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="c"># Normalize output, avoid clipping of final output by scaling the final</span>
    <span class="c"># frames.</span>
    <span class="s">&quot;normalize&quot;</span> <span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="c"># Defines the number of potential grains to choose from matches when</span>
    <span class="c"># synthesizing output.</span>
    <span class="s">&quot;match_quantity&quot;</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="n">output_file</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&quot;samplerate&quot;</span><span class="p">:</span> <span class="mi">44100</span><span class="p">,</span>
    <span class="s">&quot;format&quot;</span><span class="p">:</span> <span class="mi">131075</span><span class="p">,</span>
    <span class="s">&quot;channels&quot;</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="configuration-flags">
<h2>Configuration Flags<a class="headerlink" href="#configuration-flags" title="Permalink to this headline">¶</a></h2>
<p>For quick modification of analysis parameters, parameter flags can be specified
directly when calling the script. For example:</p>
<div class="highlight-bash"><div class="highlight"><pre>concatenator ./source_db ./target_db ./output_db --src_db <span class="se">\</span>
./analysed_source_db --tar_db ./analysed_tar_db --reanalyse --fft <span class="se">\</span>
<span class="s1">&#39;--window_size 2048&#39;</span>
</pre></div>
</div>
<p>This overwrites the value specified for window_size in the config file with the
value provided.</p>
<p>When databases have already been created, previous data is used when re-running
the script over them. This allows for different databases to be used without
continuous reanalysis. However, if analysis or matching parameters are changed,
the &#8220;&#8211;reanalyse&#8221; and &#8220;&#8211;rematch&#8221; flags can be used to force the overwriting of
old data, using the new parameters.</p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2016, Sam Perry.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>